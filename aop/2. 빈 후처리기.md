# 빈 후처리기(BeanPostProcessor)
- 스프링이 빈 저장소에 등록할 목적으로 생성한 <u>객체를 빈 저장소에 등록하기 직전에 조작하기 위해 사용</u>
    - 빈을 생성한 후 무언가를 처리하는 용도
    - 빈을 조작하고 변경할 수 있는 후킹 포인트.
### 과정
- **생성** : 스프링 빈 대상이 되는 객체 생성(@Bean, 컴포넌트 스캔 모두 포함)
- **전달** : 생성된 객체를 빈 저장소에 등록하기 직전에 빈 후처리기에 전달
- **후 처리 작업** : 빈 후처리기는 전달된 스프링 빈 객체를 조작하거나 다른 객체로 바꿔치기 할 수 있음
- **등록** : 빈을 반환
  - 전달된 빈을 그대로 반환하면 해당 빈 등록
  - 바꿔치기하면 다른 객체가 빈 저장소에 등록

```java
public interface BeanPostProcessor {
  Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException;
  Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException;
}
```
- BeanPostProcessor 인터페이스를 구현하고, 스프링 빈으로 등록하면 됨.
- `postProcessBeforeInitialization` : 객체 생성 이후에 @PostConstruct같은 초기화가 발생하기 **전에** 호출되는 포스트 프로세서.
- `postProcessAfterInitialization` : 객체 생성 이후에 @PostConstruct 같은 초기화가 발생한 **다음에** 호출되는 포스트 프로세서.

```java
class AToBPostProcessor implements BeanPostProcessor {
	@Override
    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
             log.info("beanName={} bean={}", beanName, bean);
             
        if (bean instanceof A) {
		    return new B();
		}
		
        return bean;
	}
}
```
```
 ..AToBPostProcessor - beanName=beanA bean=hello.proxy.postprocessor...A@21362712
 ..B - hello B
```