# 트랜잭션
## ACID
- `원자성(Atomicity)` : 트랜잭션 내에서 실행한 작업들은 마치 하나의 작업인 것처럼 모두 성공 하거나 모두 실패
- `일관성(Consistency)` : 모든 트랜잭션은 데이터베이스 상태를 유지 ex) 무결성 제약 조건 등등을 만족해야
- `격리성(Isolation)` : 동시에 실행되는 트랜잭션들이 서로에게 영향을 미치지 않도록 격리
- `지속성(duration)` : 트랜잭션이 끝나면 그 결과가 항상 영구적으로 기록돼야함.
> 트랜잭션은 원자성, 일관성, 지속성을 보장
> 트랜잭션 간의 격리성을 완벽히 보장하려면 트랜잭션을 거의 순서대로 실행 -> 처리 성능 나빠짐
> 격리 수준을 정함.


## 데이터베이스 연결 구조와 db 세션
- db는 어플과 커넥션을 맺게 되는데, 이때 데이터베이스 서버는 내부에 `세션`이라는 것을 만듦.
  - 앞으로 해당 커넥션을 통한 모든 요청은 이 세션을 통해 실행
  - sql을 전달하면, 현재 커넥션에 연결된 세션이 sql을 실행
- 세션은 트랜잭션을 시작하고, 커밋 또는 롤백을 통해 트랜잭션을 종료, 이후 트랜잭션 다시 시작
- 사용자가 커넥션을 닫고나 세션을 강제로 종료하면 세션은 종료됨.
</br>
- 커넥션 풀이 10개의 커넥션을 생성하면, 세션도 10개 만들어짐.
